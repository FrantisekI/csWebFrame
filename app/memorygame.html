<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
    <link rel="stylesheet" href="/src/memory-game.css">
    <script>
        function flipCard(cardIndex) {
            // Find the corresponding card button and click it
            const form = document.querySelector(`form[action*="cardButton_${cardIndex}"]`);
            if (form) {
                form.submit();
            }
        }
        
        // Auto-hide flipped cards after a delay if they don't match
        window.onload = function() {
            const flippedCards = document.querySelectorAll('.memory-card.flipped:not(.matched)');
            if (flippedCards.length === 2) {
                setTimeout(() => {
                    // The server will handle the logic, this is just for visual feedback
                    location.reload();
                }, 1500);
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <h1>{{title}}</h1>
        
        <div class="game-info">
            <div class="info-item">
                <div class="label">Score (Pairs Found)</div>
                <div class="value">{{score}}</div>
            </div>
            <div class="info-item">
                <div class="label">Moves</div>
                <div class="value">{{moves}}</div>
            </div>
        </div>
        
        <div class="game-message {{isComplete == 'true' ? 'success' : 'info'}}">
            {{gameMessage}}
        </div>
        
        <!-- Show flip back button when 2 cards are flipped but don't match -->
        
        <div style="text-align: center; margin: 15px 0;">
            {{flipBackButton}}
        </div>
        
        {{gameBoard}}
        
        <!-- Hidden card buttons for POST handling -->
        <div style="display: none;">
            {{cardButton_0}}
            {{cardButton_1}}
            {{cardButton_2}}
            {{cardButton_3}}
            {{cardButton_4}}
            {{cardButton_5}}
            {{cardButton_6}}
            {{cardButton_7}}
            {{cardButton_8}}
            {{cardButton_9}}
            {{cardButton_10}}
            {{cardButton_11}}
            {{cardButton_12}}
            {{cardButton_13}}
            {{cardButton_14}}
            {{cardButton_15}}
            {{flipBackButton}}
        </div>
        
        <div class="game-controls">
            {{newGameButton}}
            {{resetStatsButton}}
        </div>
        
        <a href="/" class="back-link">‚Üê Back to Home</a>
        
        <div class="features-info">
            <p>This memory game demonstrates:</p>
            <ul>
                <li>Complex component architecture with nested components</li>
                <li>External CSS file loading from src folder</li>
                <li>Multiple session variables working together</li>
                <li>Custom HTML generation in components</li>
                <li>JavaScript integration with C# backend</li>
                <li>Game state management across requests</li>
            </ul>
        </div>
    </div>
</body>
</html>