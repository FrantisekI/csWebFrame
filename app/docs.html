<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .navigation ul {
            list-style: none;
            padding: 0;
            display: flex;
            gap: 20px;
            background: #f4f4f4;
            padding: 10px;
            border-radius: 5px;
        }
        .navigation a {
            text-decoration: none;
            color: #333;
            padding: 8px 16px;
            border-radius: 3px;
        }
        .navigation a:hover, .nav-active {
            background: #007bff;
            color: white;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            border-left: 4px solid #28a745;
            background: #f8f9fa;
            border-radius: 0 5px 5px 0;
        }
        .component-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #fff;
        }
        .architecture-diagram {
            background: #e7f3ff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .pros {
            background: #d4edda;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #28a745;
        }
        .cons {
            background: #f8d7da;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #dc3545;
        }
        .flow-diagram {
            background: #fff3cd;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }
        h3 {
            color: #666;
            margin-top: 25px;
        }
        code {
            background: #f8f8f8;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .highlight {
            background: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>{{title}}</h1>
    <p><em>{{subtitle}}</em></p>
    
    {{navigation}}
    
    <div class="section">
        <h2>üèóÔ∏è Architektura csWebFrame</h2>
        <div class="architecture-diagram">
HTTP Request ‚Üí HttpListener ‚Üí FileReader ‚Üí SitesHolder ‚Üí UserSession<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Üì<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTML Response
        </div>
    </div>

    <div class="section">
        <h2>üì° Http Listener</h2>
        <div class="component-section">
            <h3>√öƒçel</h3>
            <p>Http listener je kopi√≠ z <strong>ofici√°ln√≠ dokumentace Microsoftu</strong> obohacen√° o Multithreading.</p>
            
            <h3>Funkce</h3>
            <ul>
                <li>Poslouch√° na p≈ôedem definovan√© adrese (z <code>urls.txt</code>)</li>
                <li>Odpov√≠d√° na HTTP dotazy</li>
                <li>Podporuje v√≠cevl√°knov√© zpracov√°n√≠</li>
                <li>Deleguje zpracov√°n√≠ na <code>FileReader</code></li>
            </ul>
            
            <div class="flow-diagram">
                <strong>Flow:</strong> P≈ô√≠choz√≠ HTTP Request ‚Üí Multithreading ‚Üí FileReader
            </div>
        </div>
    </div>

    <div class="section">
        <h2>üìÅ FileReader</h2>
        <div class="component-section">
            <h3>Rozhodov√°n√≠ podle typu requestu</h3>
            <ul>
                <li><strong>GET Request:</strong>
                    <ul>
                        <li>Soubory (obr√°zky, CSS, JS) ‚Üí p≈ôeƒçte ze souborov√©ho syst√©mu</li>
                        <li>Str√°nky ‚Üí deleguje na <code>SitesHolder</code></li>
                    </ul>
                </li>
                <li><strong>POST Request:</strong> Rovnou ≈ôe≈°√≠ <code>SitesHolder</code></li>
            </ul>
            
            <div class="flow-diagram">
                <strong>GET Flow:</strong> URL anal√Ωza ‚Üí Soubor? ‚Üí FileSystem | Str√°nka? ‚Üí SitesHolder<br>
                <strong>POST Flow:</strong> POST data ‚Üí SitesHolder
            </div>
        </div>
    </div>

    <div class="section">
        <h2>üå≥ SitesHolder</h2>
        <div class="component-section">
            <h3>Stromov√° struktura str√°nek</h3>
            <p>P≈ôi startu se naƒçtou v≈°echny str√°nky z adres√°≈ôe <code>app</code> a vytvo≈ô√≠ se stromov√° struktura.</p>
            
            <h3>SiteNode - vrchol stromu</h3>
            <ul>
                <li>Ukazatel na zkompilovanou str√°nku</li>
                <li>Odkazy na potomky a p≈ôedka</li>
                <li>Ulo≈æen√Ω layout (pokud nen√≠ list)</li>
                <li>Index jako potomek</li>
            </ul>
            
            <div class="highlight">
                <strong>Proƒç strom a ne hash tabulka?</strong><br>
                Stromov√° struktura umo≈æ≈àuje snadn√© dohled√°v√°n√≠ layout≈Ø rodiƒç≈Ø.
            </div>
            
            <h3>Zpracov√°n√≠ GET requestu</h3>
            <div class="flow-diagram">
                1. Ovƒõ≈ô√≠ existenci str√°nky (404 pokud neexistuje)<br>
                2. Vygeneruje HTML z posledn√≠ str√°nky<br>
                3. Postupuje k rodiƒçi a p≈ôid√°v√° layouty kolem
            </div>
            
            <h3>Zpracov√°n√≠ POST requestu</h3>
            <div class="flow-diagram">
                1. Najde str√°nku pro kterou je POST urƒçen<br>
                2. Najde komponentu kter√° m√° data zpracovat<br>
                3. Zpracuje data<br>
                4. Vr√°t√≠ status 303 + redirect URL<br>
                5. Browser automaticky po≈°le GET request
            </div>
            
            <div class="highlight">
                <strong>Proƒç 303 redirect?</strong><br>
                Pokud by se rovnou vr√°tila str√°nka, browser by se zeptal o mo≈ænou ztr√°tu poslan√Ωch dat.
            </div>
        </div>
    </div>

    <div class="section">
        <h2>üë§ UserSession</h2>
        <div class="component-section">
            <h3>P≈Øvodn√≠ vs. Fin√°ln√≠ ≈ôe≈°en√≠</h3>
            <div class="highlight">
                <strong>P≈Øvodn√≠ my≈°lenka:</strong> Jedna velk√° t≈ô√≠da pro v≈°echny promƒõnn√©<br>
                <strong>Probl√©m:</strong> Neintuitivn√≠ a typovƒõ nebezpeƒçn√©<br>
                <strong>≈òe≈°en√≠:</strong> <code>SessionVar&lt;TVar&gt;</code> - deklarace na jeden ≈ô√°dek
            </div>
            
            <h3>Vlastnosti UserSession</h3>
            <ul>
                <li>Slovn√≠k: kl√≠ƒç = <code>Type</code> t≈ô√≠dy, hodnota = instance</li>
                <li>Ka≈æd√Ω u≈æivatel m√° vlastn√≠ UserSession</li>
                <li>V√Ωbƒõr podle cookie z HTTP requestu</li>
                <li>Automatick√© ƒçi≈°tƒõn√≠ nepou≈æ√≠van√Ωch sessions (ka≈æd√Ωch 10 minut)</li>
                <li>Persistence mezi requesty</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>üß© DefaultHtmlComponent</h2>
        <div class="component-section">
            <h3>Historie v√Ωvoje</h3>
            <div class="highlight">
                Byla vytvo≈ôena a≈æ v pr≈Øbƒõhu v√Ωvoje, tak≈æe p≈Øvodn√≠ t≈ô√≠dy nebyly p≈ôepracov√°ny na jej√≠ z√°kladƒõ.
            </div>
            
            <h3>V√Ωhody</h3>
            <ul>
                <li>Jednodu≈°≈°√≠ opakovatelnost k√≥du</li>
                <li>Sjednocen√© z√≠sk√°v√°n√≠ HTML</li>
                <li>Sjednocen√© reagov√°n√≠ na POST</li>
                <li>Baz√°ln√≠ t≈ô√≠da pro v≈°echny komponenty</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>üîó PostUrl</h2>
        <div class="component-section">
            <h3>√öƒçel</h3>
            <p>Struct pro zjednodu≈°en√≠ pr√°ce s POST requesty a jejich smƒõrov√°n√≠m.</p>
            
            <h3>Struktura</h3>
            <div class="flow-diagram">
                PostUrl = cesta k str√°nce + "&" + index od konce + "&" + cesta ke komponentƒõ
            </div>
            
            <p>Zaji≈°≈•uje spr√°vn√© smƒõrov√°n√≠ POST request≈Ø na konkr√©tn√≠ komponenty.</p>
        </div>
    </div>

    <div class="section">
        <h2>üìä Hodnocen√≠ frameworku</h2>
        <div class="pros-cons">
            <div class="pros">
                <h3>‚úÖ Klady</h3>
                <ul>
                    <li>M√°lo chyb bƒõhem v√Ωvoje</li>
                    <li>Nepot≈ôebuje tolik roz≈°i≈ôov√°n√≠</li>
                    <li>Odlehƒçen√Ω zp≈Øsob psan√≠ mal√Ωch webov√Ωch aplikac√≠</li>
                    <li>Jednoduch√° struktura</li>
                    <li>Typov√° bezpeƒçnost pomoc√≠ SessionVar</li>
                </ul>
            </div>
            <div class="cons">
                <h3>‚ùå Z√°pory</h3>
                <ul>
                    <li>Vy≈æaduje "stra≈°nƒõ moc k√≥du"</li>
                    <li>P≈ôeskakov√°n√≠ mezi .cs a .html soubory</li>
                    <li>P≈ôeskakov√°n√≠ do komponent</li>
                    <li>Nehod√≠ se na vƒõt≈°√≠ aplikace</li>
                    <li>Omezeno na linuxov√© syst√©my</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>üéØ Z√°vƒõr autora</h2>
        <div class="highlight">
            <p><em>"Nemƒõl jsem √∫plnƒõ p≈ôesnƒõ specifikov√°no, co bych chtƒõl od programu, jeliko≈æ jsem si √∫plnƒõ nebyl jist√Ω, co jde. P≈ôijde mi, ale, ≈æe to zase tolik roz≈°i≈ôov√°n√≠ nepot≈ôebuje, a≈æ se div√≠m, ≈æe se objevuje tak m√°lo chyb."</em></p>
            
            <p><em>"Na druhou stranu, p≈ôijde mi, ≈æe co je pot≈ôeba napsat vy≈æaduje stra≈°nƒõ moc k√≥du, je pot≈ôeba p≈ôeskakovat mezi .cs a html soubory a do komponent. Je to takov√Ω odlehƒçen√Ω zp≈Øsob, jak ps√°t mal√© webov√© aplikace, ale na nic vƒõt≈°√≠ho se to moc nehod√≠."</em></p>
        </div>
        
        <h3>Shrnut√≠</h3>
        <p>csWebFrame je experiment√°ln√≠ framework urƒçen√Ω pro <strong>mal√© webov√© aplikace</strong> s d≈Ørazem na:</p>
        <ul>
            <li>Jednoduchost pou≈æit√≠</li>
            <li>Typovou bezpeƒçnost</li>
            <li>Komponentov√Ω p≈ô√≠stup</li>
            <li>Sessionov√© promƒõnn√©</li>
        </ul>
    </div>

    <div class="section">
        <h2>üîó Souvisej√≠c√≠ str√°nky</h2>
        <ul>
            <li><a href="/">Domovsk√° str√°nka s README p≈ô√≠klady</a></li>
            <li><a href="/about">O aplikaci</a></li>
            <li><a href="/zviratka">Uk√°zka slo≈ækov√© struktury</a></li>
        </ul>
    </div>
</body>
</html>
